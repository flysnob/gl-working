.section.process
  %h2= "Project name: #{@project.name}"
  .row
    %small
      %em.text-muted
        .row
          .col-md-2 Project create on:
          .col-md-10= @project.created_at.strftime('%m/%d/%Y')
        .row
          .col-md-2 Project description:
          .col-md-10= @project.description
  - unless @response_nodes.length.zero?
    .row
      .col-md-12.spacer
        %h3.panel-title Previous Project Nodes (in sequence)
      .col-md-12.spacer
        %div{ class: 'btn-group', role: 'group' }
          - @response_nodes.each do |n|
            = link_to n.index, previous_project_path(node_code: n.question_code), { class: 'btn btn-default', title: "Node question(ID #{n.question_code}): #{n.content}" }
  .row
    .col-md-12
      %h3= "Current index: #{@index}"
    .col-md-12
      %h4= "Current node ID: #{@next_node.question_code}"
  = form_for @project, url: { action: 'work' }, method: 'get', html: { id: 'node' } do |f|
    %input{ type: 'hidden', name: 'question_id', id: 'question_id', value: @next_node.question_id }
    %input{ type: 'hidden', name: 'node_id', id: 'node_id', value: @next_node.id }
    %input{ type: 'hidden', name: 'index', id: 'index', value: @index }
    %input{ type: 'hidden', name: 'response_value', id: 'response_value', value: '' }
    %input{ type: 'hidden', name: 'target_node', id: 'target_node', value: '' }
    %input{ type: 'hidden', name: 'return_node', id: 'return_node', value: '' }
    .row
      .col-mid-12
        .col-mid-6
          %h3 Question
        .col-mid-6
          %h4= @next_node.content
      .col-mid-12
        .row
          - if @next_node.response_1.present?
            = f.submit @next_node.response_1, { class: 'btn-button btn-primary node-response', onclick: "$('#response_value').val('1');$('#target_node').val('#{@next_node.target_1}');$('#return_node').val('#{@next_node.return_node}')" }
          - if @next_node.response_2.present?
            = f.submit @next_node.response_2, { class: 'btn-button btn-primary node-response', onclick: "$('#response_value').val('2');$('#target_node').val('#{@next_node.target_2}');$('#return_node').val('#{@next_node.return_node}')" }
          - if @next_node.response_3.present?
            = f.submit @next_node.response_3, { class: 'btn-button btn-primary node-response', onclick: "$('#response_value').val('3');$('#target_node').val('#{@next_node.target_3}');$('#return_node').val('#{@next_node.return_node}')" }
      .col-mid-12
        %textarea{ name: 'comment', id: 'comment', placeholder: 'Enter comments related to this node here' }
          = @next_node.comment
  .row
    .col-mid-12
      %button#asc.btn-button.btn-info ASC
      %button#asc.btn-button.btn-info Examples
      %button#asc.btn-button.btn-info FAQ
      %button#asc.btn-button.btn-info Help
  .row
    .col-mid-12
      = @img
